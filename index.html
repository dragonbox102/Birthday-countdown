<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Days left to my birthday</title>
<style>
  :root{
    --bg1:#0f172a;
    --bg2:#06203a;
    --accent:#7cdbff;
    --card:#071220;
    --glass: rgba(255,255,255,0.04);
  }
  html,body{height:100%;margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;}
  body{
    display:flex;align-items:center;justify-content:center;
    background:linear-gradient(135deg,var(--bg1) 0%,var(--bg2) 100%);
    color:#e6f7ff;
    -webkit-font-smoothing:antialiased;
  }
  .wrap{
    width:min(880px,94vw);
    padding:28px;
    border-radius:16px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    box-shadow: 0 10px 30px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
    display:flex;gap:20px;align-items:center;flex-direction:column;
    text-align:center;
  }
  h1{margin:0 0 6px 0;font-weight:700;letter-spacing:0.4px}
  p.sub{margin:0;color:rgba(230,247,255,0.75)}
  .card{
    width:100%;
    display:flex;
    gap:14px;
    justify-content:space-between;
    margin-top:18px;
    flex-wrap:wrap;
  }
  .tile{
    flex:1 1 140px;
    min-width:126px;
    background:linear-gradient(180deg,var(--card), rgba(255,255,255,0.01));
    border-radius:12px;
    padding:16px;
    box-shadow: 0 6px 18px rgba(3,8,20,0.45);
    backdrop-filter: blur(6px);
    border:1px solid rgba(255,255,255,0.03);
    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
  }
  .value{
    font-size:2.3rem;
    font-weight:800;
    letter-spacing:-1px;
    color:var(--accent);
    line-height:1;
  }
  .label{
    margin-top:6px;
    font-size:0.86rem;
    color:rgba(230,247,255,0.72);
    text-transform:uppercase;
    letter-spacing:1px;
  }
  .bottom{
    margin-top:14px;
    display:flex;
    gap:10px;
    align-items:center;
    width:100%;
    justify-content:space-between;
    flex-wrap:wrap;
  }
  .tz{
    color:rgba(230,247,255,0.65);
    font-size:0.9rem;
  }
  .now{
    color:rgba(230,247,255,0.9);
    font-weight:600;
  }
  @media (max-width:520px){
    .value{font-size:1.6rem}
    .tile{padding:12px}
  }
</style>
</head>
<body>
  <div class="wrap" role="region" aria-label="Countdown to birthday">
    <div>
      <h1>Days left to my birthday</h1>
      <p class="sub">Countdown to <strong>Sep 4</strong> (Asia/Bangkok)</p>
    </div>

    <div class="card" id="card">
      <div class="tile" aria-live="polite">
        <div class="value" id="days">0</div>
        <div class="label">Days</div>
      </div>
      <div class="tile" aria-live="polite">
        <div class="value" id="hours">00</div>
        <div class="label">Hours</div>
      </div>
      <div class="tile" aria-live="polite">
        <div class="value" id="minutes">00</div>
        <div class="label">Minutes</div>
      </div>
      <div class="tile" aria-live="polite">
        <div class="value" id="seconds">00</div>
        <div class="label">Seconds</div>
      </div>
      <div class="tile" aria-live="polite">
        <div class="value" id="millis">000</div>
        <div class="label">Milliseconds</div>
      </div>
    </div>

    <div class="bottom">
      <div class="tz">Time zone: <strong>Asia/Bangkok (UTC+7)</strong></div>
      <div class="now">Bangkok now: <span id="bangkokNow">--:--:--</span></div>
    </div>
  </div>

<script>
function bangkokNowParts() {
  const s = new Date().toLocaleString('sv-SE', { timeZone: 'Asia/Bangkok' });
  const [datePart, timePart] = s.split(' ');
  const [y, m, d] = datePart.split('-').map(Number);
  const [hh, mm, ss] = (timePart || "00:00:00").split(':').map(Number);
  return { y, m, d, hh, mm, ss };
}

function getBangkokDateObject(y,m,d,h=0,min=0,s=0,ms=0){
  const iso = `${String(y).padStart(4,'0')}-${String(m).padStart(2,'0')}-${String(d).padStart(2,'0')}T${String(h).padStart(2,'0')}:${String(min).padStart(2,'0')}:${String(s).padStart(2,'0')}.000+07:00`;
  return new Date(iso);
}

function updateOnce(){
  const parts = bangkokNowParts();
  const nowBangkok = getBangkokDateObject(parts.y, parts.m, parts.d, parts.hh, parts.mm, parts.ss);
  const thisYearTarget = getBangkokDateObject(parts.y, 9, 4, 0, 0, 0);
  let target;
  if (nowBangkok.getTime() < thisYearTarget.getTime()) target = thisYearTarget;
  else target = getBangkokDateObject(parts.y + 1, 9, 4, 0, 0, 0);
  return { nowBangkok, target };
}

const $days = document.getElementById('days');
const $hours = document.getElementById('hours');
const $minutes = document.getElementById('minutes');
const $seconds = document.getElementById('seconds');
const $millis = document.getElementById('millis');
const $bangkokNow = document.getElementById('bangkokNow');

let baseline = updateOnce();
let baselineAt = performance.now();

function render(){
  const perfNow = performance.now();
  const elapsedMs = perfNow - baselineAt;
  const nowMs = baseline.nowBangkok.getTime() + Math.round(elapsedMs);
  const targetMs = baseline.target.getTime();
  let diff = targetMs - nowMs;

  if (diff < 0) {
    baseline = updateOnce();
    baselineAt = performance.now();
    return;
  }

  const days = Math.floor(diff / (24*3600*1000));
  diff -= days * 24*3600*1000;
  const hours = Math.floor(diff / (3600*1000));
  diff -= hours * 3600*1000;
  const minutes = Math.floor(diff / (60*1000));
  diff -= minutes * 60*1000;
  const seconds = Math.floor(diff / 1000);
  const millis = diff % 1000;

  $days.textContent = String(days);
  $hours.textContent = String(hours).padStart(2,'0');
  $minutes.textContent = String(minutes).padStart(2,'0');
  $seconds.textContent = String(seconds).padStart(2,'0');
  $millis.textContent = String(millis).padStart(3,'0');

  const nowDate = new Date(nowMs);
  const displayTime = nowDate.toLocaleString('en-GB', {
    hour: '2-digit', minute: '2-digit', second: '2-digit',
    hour12: false, timeZone: 'Asia/Bangkok'
  });
  const msPart = String(nowDate.getMilliseconds()).padStart(3,'0');
  $bangkokNow.textContent = `${displayTime}.${msPart}`;
}

setInterval(()=>{
  baseline = updateOnce();
  baselineAt = performance.now();
}, 10000);

setInterval(render, 50);
render();
</script>
</body>
</html>
